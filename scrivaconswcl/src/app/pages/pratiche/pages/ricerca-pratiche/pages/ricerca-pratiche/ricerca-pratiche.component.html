<!--
* ========================LICENSE_START=================================
* 
* Copyright (C) 2025 Regione Piemonte
* 
* SPDX-FileCopyrightText: (C) Copyright 2025 Regione Piemonte
* SPDX-License-Identifier: EUPL-1.2
* =========================LICENSE_END==================================
-->
<div class="page">
    <div class="practice-detail row">
        <div class="col-12">
            <h1>
                {{ 'PRACTICE.SEARCH.TITLE' | translate }}
            </h1>
        </div>
        <div class="col-12">
            <div class="separator">&nbsp;</div>
        </div>
    </div>
    <div class="col-12 pl-0">
        <app-card>
            <app-card-body>
                <div class="row">
                    <div class="col-12 col-lg-9">
                        <app-form *ngIf="practiceSearchForm" [form]="practiceSearchForm"></app-form>
                    </div>
                    <div class="col-12 col-lg-9 pt-2">
                        <button
                              appFocusRemover
                              type="button"
                              class="btn btn-primary custom-button float-right"
                              (click)="onSearch()"
                        >
                            {{ 'PRACTICE.SEARCH.BUTTONS.SEARCH' | translate | uppercase }}
                        </button>
                        <button
                              appFocusRemover
                              class="btn reset-btn shadow-none"
                              (click)="onClear()"
                        >
                            {{ 'PRACTICE.SEARCH.BUTTONS.CLEAR' | translate | uppercase }}
                        </button>
                    </div>
                </div>
            </app-card-body>
        </app-card>
    </div>
</div>

<div class="page" style="padding-top: 30px" *ngIf="searched">
  <div class="row">
    <div class="col pl-0">
      <div class="total-elements pl-1">
          {{ getNumberOfElements() }}
            {{ 'PRACTICE.SEARCH.RESULT' | translate }}
        </div>
      </div>
      <div class="col text-right pt-4" *ngIf="!!getNumberOfElements()">
        <button type="button" class="btn custom-button-outline" (click)="exportCSV()">
          {{ 'UTILS.TABLE.DOWNLOAD_EXCEL' | translate }}
        </button>
      </div>
    <!-- SCRIVA 1431 fix momentanea per messa in produzione-->
      <!-- <div class="col-12 info-text pl-0 pt-2" *ngIf="!isLoggedIn">
          <app-icon
                name="eng-remark"
                type="eng"
                cssClass="cursor-pointer mx-2"
                size="small"
                fill="#005095"
                title="{{ 'PRACTICE.LIST.ICONS.REMARK' | translate }}"
          ></app-icon>
            <span>{{ 'PRACTICE.LIST.INFO_OSSERVAZIONI' | translate }}</span>
          <a class="cursor-pointer link" (click)="toLogin()">
              <span>{{ 'PRACTICE.LIST.LOGIN' | translate }}</span>
              <app-icon
                    name="eng-scriva-lock"
                    type="eng"
                    cssClass="cursor-pointer mx-2"
                    size="small"
                    fill="#005095"
                    title="{{ 'PRACTICE.LIST.ICONS.REMARK' | translate }}"
              ></app-icon>
          </a>
      </div> -->
  </div>
  <app-card>
      <app-card-body>
          <app-table
                [emptyMessage]="'La ricerca non ha restituito alcun risultato. Modificare i criteri di ricerca e riprovare.'"
                [columns]="columns"
                [dataSource]="dataSource"
                [showPager]="true"
          ></app-table>
      </app-card-body>
  </app-card>
</div>

<ng-template #settingsTemplate let-row="row">
    <a class="list-item px-0 pt-1 cursor-pointer" (click)="onDetail(row)">
        <app-icon
              *ngIf="detailIcon.icon"
              [name]="detailIcon.icon.name"
              [type]="detailIcon.icon.type"
              [cssClass]="detailIcon.icon.cssClass"
              [fill]="detailIcon.icon.fill"
              [size]="detailIcon.icon.size"
              [color]="detailIcon.icon.color"
              [padding]="detailIcon.icon.padding"
              [baseHref]="detailIcon.icon.baseHref"
              title="{{ 'PRACTICE.LIST.ICONS.PAPER' | translate }}"
        ></app-icon>
    </a>
<!-- Oscuramento momentaneo per messa in produzione  -->
       <!-- <ng-container *ngIf="row.flg_osservazione">
        <a class="list-item px-0 pt-1" *ngIf="checkDataFineOsservazione(row); else disabledIcon" (click)="onNewRemark(row)">
            <app-icon name="eng-remark" type="eng" cssClass="cursor-pointer" size="small" fill="#005095"
                title="{{ 'PRACTICE.LIST.ICONS.NEW_REMARK' | translate }}">
            </app-icon>
        </a>
    </ng-container> 
</ng-template>
<ng-template #disabledIcon>
    <a class="list-item px-0 pt-1">
        <app-icon
              name="eng-disabled-remark"
              type="eng"
              size="small"
              fill="#005095"
              title="{{ 'PRACTICE.LIST.ICONS.NEW_REMARK' | translate }}"
        >
        </app-icon>
    </a>
</ng-template> -->
